import{r as i,j as e,y as Re,a5 as _e,z as N,t as Se,H as va,U as D,K as fa,a2 as ja,a7 as ya,J as we,i as Ca,T as Sa,C as wa,k as Pa,l as G,O as ka,P as Aa,N as Ta}from"./index-b5515533.js";import{i as Ie,c as Ea,a as Na,s as F,u as Y,Q as P,d as X,e as Ra,f as _a,g as Ia,h as Ma,k as Me}from"./consts-d215bccc.js";import{a as Qa,b as Da,u as Qe,c as Fa,U as $a,g as Ba,d as Va,e as Ha}from"./_requests-b4a1cb71.js";import{u as Oa,g as qa,a as za,Q as La,b as Ua}from"./QueryResponseProvider-6a3ffc9c.js";import{u as Ka,S as M,g as Wa,a as Ga,Q as Pe}from"./react-select.esm-318e14a9.js";import{u as Ja,g as Ya,a as Xa,Q as Za,b as es}from"./QueryResponseProvider-992fa234.js";import{u as as,g as ss,a as ts,Q as rs,b as is}from"./QueryResponseProvider-1211b37c.js";import{u as os,g as ls,a as ns,Q as cs,b as ds}from"./QueryResponseProvider-e964f6d4.js";import{u as us,g as ms,a as ps,Q as hs,b as gs}from"./QueryResponseProvider-108d8cd7.js";import{u as J,K as xs}from"./KTCard-4cc4d024.js";import{r as bs,i as vs,u as ke,B as S,c as w,T as k,I as A,d as Ae,b as Te,M as Ee}from"./Delete-9a9970bf.js";import{M as v,D as fs,H as js}from"./index-1c80dd71.js";import"./hasClass-14f1d72f.js";import"./utils-30b83324.js";const De=i.createContext(Ie),ys=({children:u})=>{const[d,m]=i.useState(Ie.state),f=p=>{const h={...d,...p};m(h)};return e.jsx(De.Provider,{value:{state:d,updateState:f},children:u})},Cs=()=>i.useContext(De),Fe=Ea(Na),Ss=({children:u})=>{const{state:d}=Cs(),[m,f]=i.useState(F(d)),p=i.useMemo(()=>F(d),[d]),[h,x]=i.useState(F(d)),j=i.useMemo(()=>F(d),[d]);i.useEffect(()=>{m!==p&&(m.match(/search=([^&]*)/)&&f(m.replace(/search=/,"keyword=")),f(decodeURIComponent(p)))},[p]),i.useEffect(()=>{h!==j&&(h.match(/search=([^&]*)/)&&x(h.replace(/search=/,"keyword=")),console.log("archivedQuery",decodeURIComponent(h)),x(decodeURIComponent(j)))},[j]);const{isFetching:r,refetch:b,data:T}=Y(`${P.CATEGORIES_LIST}-${m}`,()=>Qa(m),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),{isFetching:_,refetch:B,data:V}=Y(`${P.ARCHIVED_CATEGORIES_LIST}-${h}`,()=>Da(h),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1});return e.jsx(Fe.Provider,{value:{isLoading:r||_,refetch:()=>{b(),B()},response:{active:T,archived:V},query:m},children:u})},$=()=>i.useContext(Fe),$e=()=>{var d,m;const{response:u}=$();return u?{active:((d=u==null?void 0:u.active)==null?void 0:d.data)||[],archived:((m=u==null?void 0:u.archived)==null?void 0:m.data)||[]}:{active:[],archived:[]}},ws=()=>{const{refetch:u}=$();return u},Be=i.createContext(X),Ps=({children:u})=>{const[d,m]=i.useState(X.selected),[f,p]=i.useState(X.itemIdForUpdate),{isLoading:h}=$(),x=$e(),j=i.useMemo(()=>Ra(h,x),[h,x]),r=i.useMemo(()=>_a(x,d),[x,d]);return e.jsx(Be.Provider,{value:{selected:d,itemIdForUpdate:f,setItemIdForUpdate:p,disabled:j,isAllSelected:r,onSelect:b=>{Ia(b,d,m)},onSelectAll:()=>{Ma(r,m,x)},clearSelected:()=>{m([])}},children:u})},R=()=>i.useContext(Be),ks=Re().shape({order:_e().min(0,"Order can't be negative"),name:N().min(3,"Minimum 3 symbols").required("Name is required"),description:N().min(3,"Minimum 3 symbols")}),Ne=({category:u,isCategoryLoading:d})=>{const{setItemIdForUpdate:m}=R(),{refetch:f}=$(),[p]=i.useState({...u,available:u.available||!0,name:u.name||""}),h=b=>{b&&f(),m(void 0)},x=Se("media/svg/avatars/blank.svg"),j=Se(`media/${p.imgCover}`),r=va({initialValues:p,validationSchema:ks,onSubmit:async(b,{setSubmitting:T})=>{T(!0);try{Me(b._id)?await Qe(b==null?void 0:b._id,b):await Fa(b)}catch(_){console.error(_)}finally{T(!0),h(!0)}}});return e.jsxs(e.Fragment,{children:[e.jsxs("form",{id:"kt_modal_add_user_form",className:"form ",onSubmit:r.handleSubmit,noValidate:!0,children:[e.jsxs("div",{className:"d-flex flex-column scroll-y me-n7 pe-7",id:"kt_modal_add_user_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_user_header","data-kt-scroll-wrappers":"#kt_modal_add_user_scroll","data-kt-scroll-offset":"300px",children:[e.jsxs("div",{className:"fv-row mb-7",children:[e.jsx("label",{className:"d-block fw-bold fs-6 ms-2 mb-5",children:"ImgCover"}),e.jsx("div",{className:"image-input image-input-outline ms-2","data-kt-image-input":"true",style:{backgroundImage:`url('${x}')`},children:e.jsx("div",{className:"image-input-wrapper w-125px h-125px ms-2",style:{backgroundImage:`url('${j}')`}})})]}),e.jsxs("div",{className:"fv-row mb-7",children:[e.jsx("label",{className:"required fw-bold fs-6 ps-2 mb-2",children:"Name"}),e.jsx("input",{placeholder:"Full name",...r.getFieldProps("name"),type:"text",name:"name",className:D("form-control form-control-solid mb-3 ms-2 mb-lg-0",{"is-invalid":r.touched.name&&r.errors.name},{"is-valid":r.touched.name&&!r.errors.name}),autoComplete:"off",disabled:r.isSubmitting||d}),r.touched.name&&r.errors.name&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("div",{className:"fv-help-block",children:e.jsx("span",{role:"alert",children:r.errors.name})})})]}),e.jsxs("div",{className:"fv-row mb-7",children:[e.jsx("label",{className:"required fw-bold fs-6  ms-2 mb-2",children:"Order"}),e.jsx("input",{placeholder:"order",...r.getFieldProps("order"),className:D("form-control form-control-solid mb-3 mb-lg-0 ms-2",{"is-invalid":r.touched.order&&r.errors.order},{"is-valid":r.touched.order&&!r.errors.order}),type:"text",name:"order",autoComplete:"off",disabled:r.isSubmitting||d}),r.touched.order&&r.errors.order&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("span",{role:"alert",children:r.errors.order})})]}),e.jsxs("div",{className:"fv-row mb-7",children:[e.jsx("label",{className:"required fw-bold fs-6 mb-2 ms-2",children:"Description"}),e.jsx("input",{placeholder:"description",...r.getFieldProps("description"),className:D("form-control form-control-solid mb-3 mb-lg-0 ms-2",{"is-invalid":r.touched.description&&r.errors.description},{"is-valid":r.touched.description&&!r.errors.description}),type:"text",name:"description",autoComplete:"off",disabled:r.isSubmitting||d}),r.touched.description&&r.errors.description&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("span",{role:"alert",children:r.errors.description})})]}),e.jsxs("div",{className:"fv-row mb-7",children:[e.jsx("label",{className:"required fw-bold fs-6 mb-2 ms-2",children:"Available"}),e.jsxs("select",{...r.getFieldProps("available"),className:D("form-control form-control-solid mb-3 mb-lg-0 ms-2",{"is-invalid":r.touched.description&&r.errors.description},{"is-valid":r.touched.description&&!r.errors.description}),name:"available",autoComplete:"off",disabled:r.isSubmitting||d,children:[e.jsx("option",{value:"true",children:"Yes"}),e.jsx("option",{value:"false",children:"No"})]}),r.touched.available&&r.errors.available&&e.jsx("div",{className:"fv-plugins-message-container",children:e.jsx("span",{role:"alert",children:r.errors.available})})]})]}),e.jsxs("div",{className:"text-center pt-15",children:[e.jsx("button",{type:"reset",onClick:()=>h(),className:"btn btn-light me-3","data-kt-users-modal-action":"cancel",disabled:r.isSubmitting||d,children:"Discard"}),e.jsxs("button",{type:"submit",className:"btn btn-primary","data-kt-users-modal-action":"submit",disabled:d||r.isSubmitting||!r.isValid||!r.touched,children:[e.jsx("span",{className:"indicator-label",children:"Submit"}),(r.isSubmitting||d)&&e.jsxs("span",{className:"indicator-progress",children:["Please wait..."," ",e.jsx("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]}),(r.isSubmitting||d)&&e.jsx($a,{})]})},As=()=>{const{itemIdForUpdate:u,setItemIdForUpdate:d}=R(),m=Me(u),{isLoading:f,data:p,error:h}=Y(`${P.PRODUCTS_LIST}-product-${u}`,()=>Ba(u),{cacheTime:0,enabled:m,onError:x=>{d(void 0),console.error(x)}});return u?!f&&!h&&p?e.jsx(Ne,{isCategoryLoading:f,category:p}):null:e.jsx(Ne,{isCategoryLoading:f,category:{_id:void 0,available:!0}})},Ts=()=>{const{setItemIdForUpdate:u}=R();return e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"fw-bolder",children:"Add Product"}),e.jsx("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:()=>u(void 0),style:{cursor:"pointer"},children:e.jsx(fa,{iconName:"cross",className:"fs-1"})})]})},Es=()=>(i.useEffect(()=>(document.body.classList.add("modal-open"),()=>{document.body.classList.remove("modal-open")}),[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:e.jsxs("div",{className:"modal-content",children:[e.jsx(Ts,{}),e.jsx("div",{className:"modal-body scroll-y mx-5 mx-xl-15 my-7",children:e.jsx(As,{})})]})})}),e.jsx("div",{className:"modal-backdrop fade show"})]}));var Z={},Ns=vs;Object.defineProperty(Z,"__esModule",{value:!0});var Ve=Z.default=void 0,Rs=Ns(bs()),_s=e;Ve=Z.default=(0,Rs.default)((0,_s.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const Is=()=>{const{selected:u,clearSelected:d}=R(),m=ja(),{setItemIdForUpdate:f}=R(),[p,h]=i.useState({}),{active:x,archived:j}=$e(),{active:r,archived:b}=Oa(),{active:T,archived:_}=Ka(),{active:B,archived:V}=Ja(),{active:He,archived:Oe}=as(),{active:qe,archived:ze}=us(),{active:Le,archived:Ue}=os(),ee=ws(),[Ke,H]=i.useState(!1),[We,O]=i.useState(x),[Ge,q]=i.useState(()=>j);i.useState(null);const[Q,E]=i.useState(null),[Je,z]=i.useState(!1),[Ye,ae]=i.useState(!1),[Xe,se]=i.useState(!1),[y,I]=i.useState(),[te,re]=i.useState([...r,...b]),[ie,Ze]=i.useState([...T,..._]),[oe,ea]=i.useState([...B,...V]),[le,aa]=i.useState([...He,...Oe]),[ne,sa]=i.useState([...qe,...ze]),[ce,ta]=i.useState([...Le,...Ue]);i.useState(!0);const[L,ra]=i.useState(),[U,ia]=i.useState(),[K,oa]=i.useState(),[W,la]=i.useState();i.useState(),i.useState();const[Fs,na]=i.useState();y==null||y._id,i.useEffect(()=>{(async()=>{try{const l=await qa(),c=await za();re([...l.data,...c.data])}catch(l){console.error("Error fetching branches:",l)}})(),(async()=>{try{const l=await Wa(),c=await Ga();Ze([...l.data,...c.data])}catch(l){console.error("Error fetching categories:",l)}})(),(async()=>{try{const l=await Ya(),c=await Xa();ea([...l.data,...c.data])}catch(l){console.error("Error fetching subcategories:",l)}})(),(async()=>{try{const l=await ss(),c=await ts();aa([...l.data,...c.data])}catch(l){console.error("Error fetching childsubcategories:",l)}})(),(async()=>{try{const l=await ms(),c=await ps();sa([...l.data,...c.data])}catch(l){console.error("Error fetching extras:",l)}})(),(async()=>{try{const l=await ls(),c=await ns();ta([...l.data,...c.data])}catch(l){console.error("Error fetching types:",l)}})()},[]);const de=i.useMemo(()=>te.map(a=>({value:a._id,label:a.name})),[te]),ue=i.useMemo(()=>ie.map(a=>({value:a._id,label:a.name})),[ie]),me=i.useMemo(()=>oe.map(a=>({value:a._id,label:a.name})),[oe]),pe=i.useMemo(()=>le.map(a=>({value:a._id,label:a.name})),[le]),ca=i.useMemo(()=>ne.map(a=>({value:a._id,label:a.name})),[ne]),da=i.useMemo(()=>ce.map(a=>({value:a._id,label:a.name})),[ce]);new DOMParser;const ua=i.useMemo(()=>[{accessorKey:"name",header:"Name",size:50,muiEditTextFieldProps:{required:!0,error:!!(p!=null&&p.name),helperText:p==null?void 0:p.name,onFocus:()=>h({...p,name:void 0})}},{accessorKey:"description",header:"Description",size:100,Cell:({cell:a})=>{const s=document.createElement("div");s.innerHTML=a.getValue();const t=s.textContent||s.innerText;return console.log("doc",t.trim()),e.jsx("span",{children:t.trim()})}},{accessorKey:"order",header:"Order",size:30,muiTableBodyCellProps:{align:"center"},muiTableHeadCellProps:{align:"center"}},{accessorKey:"price",header:"Price",size:30,muiTableBodyCellProps:{align:"center"},muiTableHeadCellProps:{align:"center"}},{accessorKey:"available",header:"Available",size:100,muiTableBodyCellProps:{align:"right"},muiTableHeadCellProps:{align:"left"},Cell:({cell:a})=>e.jsx("div",{className:"form-check form-switch form-check-custom form-check-solid",children:e.jsx("input",{className:"form-check-input cursor-pointer",type:"checkbox",checked:a.getValue(),onClick:()=>C.mutateAsync({id:a.row.original._id,update:{available:!a.row.original.available}}),id:a.row.original._id})})},{accessorKey:"showWeight",header:"Show Weight",size:100,muiTableBodyCellProps:{align:"right"},muiTableHeadCellProps:{align:"left"},Cell:({cell:a})=>e.jsx("div",{className:"form-check form-switch form-check-custom form-check-solid",children:e.jsx("input",{className:"form-check-input cursor-pointer",type:"checkbox",checked:a.getValue(),onClick:()=>C.mutateAsync({id:a.row.original._id,update:{showWeight:!a.row.original.showWeight}}),id:a.row.original._id})})},{accessorKey:"branch",header:"Branch",editVariant:"select",grow:!0,size:200,muiTableBodyCellProps:{align:"center"},muiTableHeadCellProps:{align:"center"},Edit:({cell:a,row:s,table:t})=>{const n=a.getValue();let g=[];return n.map(o=>{var l,c;g.push({value:(l=o==null?void 0:o.branch)==null?void 0:l._id,label:(c=o==null?void 0:o.branch)==null?void 0:c.name})}),e.jsx(M,{className:"react-select-styled",classNamePrefix:"react-select",isMulti:!0,options:de,defaultValue:g,menuPortalTarget:document.body,styles:{menuPortal:o=>({...o,zIndex:9999})},onChange:o=>{const l=o?o.map(c=>c.value):[];ra(l)}})},Cell:({cell:a})=>{const s=a.getValue();return e.jsx(e.Fragment,{children:s.map(t=>{var n;return e.jsx("span",{className:"badge badge-secondary me-1",children:(n=t==null?void 0:t.branch)==null?void 0:n.name})})})}},{accessorKey:"category",header:"Category",editVariant:"select",grow:!0,size:200,muiTableBodyCellProps:{align:"center"},muiTableHeadCellProps:{align:"center"},Edit:({cell:a,row:s,table:t})=>{const n=a.getValue();let g=[];return n.map(o=>{var l,c;g.push({value:(l=o==null?void 0:o.category)==null?void 0:l._id,label:(c=o==null?void 0:o.category)==null?void 0:c.name})}),console.log("edit",g),e.jsx(M,{className:"react-select-styled",classNamePrefix:"react-select",isMulti:!0,options:ue,defaultValue:g,menuPortalTarget:document.body,styles:{menuPortal:o=>({...o,zIndex:9999})},onChange:o=>{const l=o?o.map(c=>c.value):[];ia(l)}})},Cell:({cell:a})=>{const s=a.getValue();return e.jsx(e.Fragment,{children:s==null?void 0:s.map(t=>e.jsx("span",{className:"badge badge-warning me-1",children:t.category.name}))})}},{accessorKey:"subCategory",header:"SubCategory",editVariant:"select",grow:!0,size:200,muiTableBodyCellProps:{align:"center"},muiTableHeadCellProps:{align:"center"},Edit:({cell:a,row:s,table:t})=>{const n=a.getValue();console.log("subcategories from child",n);let g=[];return n.map(o=>{var l,c;g.push({value:(l=o==null?void 0:o.subCategory)==null?void 0:l._id,label:(c=o==null?void 0:o.subCategory)==null?void 0:c.name})}),console.log("edit",g),e.jsx(M,{className:"react-select-styled",classNamePrefix:"react-select",isMulti:!0,options:me,defaultValue:g,menuPortalTarget:document.body,styles:{menuPortal:o=>({...o,zIndex:9999})},onChange:o=>{const l=o?o.map(c=>c.value):[];oa(l)}})},Cell:({cell:a})=>{const s=a.getValue();return e.jsx(e.Fragment,{children:s==null?void 0:s.map(t=>{var n;return e.jsx("span",{className:"badge badge-primary me-1",children:(n=t==null?void 0:t.subCategory)==null?void 0:n.name})})})}},{accessorKey:"childSubCategory",header:"ChildSubCategory",editVariant:"select",grow:!0,size:200,muiTableBodyCellProps:{align:"center"},muiTableHeadCellProps:{align:"center"},Edit:({cell:a,row:s,table:t})=>{const n=a.getValue();let g=[];return n.map(o=>{var l,c;g.push({value:(l=o==null?void 0:o.childSubCategory)==null?void 0:l._id,label:(c=o==null?void 0:o.childSubCategory)==null?void 0:c.name})}),e.jsx(M,{className:"react-select-styled",classNamePrefix:"react-select",isMulti:!0,options:pe,defaultValue:g,menuPortalTarget:document.body,styles:{menuPortal:o=>({...o,zIndex:9999})},onChange:o=>{const l=o?o.map(c=>c.value):[];la(l)}})},Cell:({cell:a})=>{const s=a.getValue();return e.jsx(e.Fragment,{children:s==null?void 0:s.map(t=>{var n;return e.jsx("span",{className:"badge badge-primary me-1",children:(n=t==null?void 0:t.childSubCategory)==null?void 0:n.name})})})}},{accessorKey:"book",header:"Book",editVariant:"select",grow:!0,size:200,muiTableBodyCellProps:{align:"center"},muiTableHeadCellProps:{align:"center"},Edit:({cell:a,row:s,table:t})=>{const n={value:a.getValue(),label:a.getValue()};return e.jsx(M,{className:"react-select-styled",classNamePrefix:"react-select",options:[{value:"regular",label:"regular"},{value:"book",label:"book"},{value:"only book",label:"only book"}],defaultValue:n,menuPortalTarget:document.body,styles:{menuPortal:g=>({...g,zIndex:9999})},onChange:g=>{na(g)}})},Cell:({cell:a})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:"badge badge-primary me-1",children:a.getValue()})})}],[p,de,ue,me,pe,ca,da]),ma=Re().shape({name:N().min(3,"Minimum 3 symbols").required("Name is required"),description:N().min(3,"Minimum 3 symbols").optional(),imgCover:N().min(3,"Minimum 3 symbols").optional(),order:_e().min(1,"Minimum order is 1").optional(),branch:ya().of(N()).min(1,"Minimum 3 symbols").optional(),available:we().optional(),deleted:we().optional()}),he=async a=>{ma.validate(a.row.original).catch(t=>h(t.message)),h({});const s={...a.values,branch:L==null?void 0:L.map(t=>({branch:t})),category:U==null?void 0:U.map(t=>({category:t})),subCategory:K==null?void 0:K.map(t=>({subCategory:t})),childSubCategory:W==null?void 0:W.map(t=>({childSubCategory:t}))};await C.mutateAsync({id:a.row.original._id,update:s}),Ce.setEditingRow(null)},pa=()=>{ae(!0)},ge=()=>{ae(!1)},xe=()=>{se(!0)},be=()=>{se(!1)},ve=()=>{z(!0)},ha=async()=>{await xa.mutateAsync(),z(!1)},ga=()=>{f(null)},fe=()=>{z(!1)},xa=J(()=>Va(y),{onSuccess:()=>{m.invalidateQueries([`${P.CATEGORIES_LIST}`]),m.invalidateQueries([`${P.ARCHIVED_CATEGORIES_LIST}`]),m.refetchQueries([`${P.CATEGORIES_LIST}`]),m.refetchQueries([`${P.ARCHIVED_CATEGORIES_LIST}`]),H(!0)}}),je=J(a=>Ha(a),{onSuccess:()=>{m.invalidateQueries([`${P.CATEGORIES_LIST}`]),m.invalidateQueries([`${P.ARCHIVED_CATEGORIES_LIST}`]),ee(),H(!0),d()}}),C=J(({id:a,update:s})=>Qe(a,s),{onSuccess:()=>{ee(),H(!0)}}),ye={columns:ua,enableRowDragging:!0,enableFullScreenToggle:!1,muiTableContainerProps:{sx:{minHeight:"320px"}}};i.useEffect(()=>{O(x),q(j),re([...r,...b])},[x,j,Ke,r,b]);const Ce=ke({...ye,enableRowSelection:!0,enableStickyHeader:!0,enableCellActions:!0,enableClickToCopy:"context-menu",enableEditing:!0,editDisplayMode:"row",createDisplayMode:"row",rowPinningDisplayMode:"select-sticky",positionToolbarAlertBanner:"bottom",positionActionsColumn:"last",enableRowOrdering:!0,enableSorting:!1,enableExpandAll:!1,state:{columnOrder:["mrt-row-select","mrt-row-drag","order","name","description","price","mrt-row-expand","branch","category","subCategory","childSubCategory","available","showWeight","book"]},muiDetailPanelProps:()=>({sx:a=>({backgroundColor:a.palette.mode==="dark"?"rgba(255,210,244,0.1)":"rgba(0,0,0,0.1)"})}),muiExpandButtonProps:({row:a,table:s})=>({onClick:()=>s.setExpanded({[a.id]:!a.getIsExpanded()}),sx:{transform:a.getIsExpanded()?"rotate(180deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),renderDetailPanel:({row:a})=>a.original.branch?e.jsxs("div",{className:"d-flex justify-content-evenly",children:[e.jsxs("div",{children:["Branches :",a.original.branch.map((s,t)=>{var n;return e.jsx("span",{className:"badge badge-secondary me-1",children:(n=s==null?void 0:s.branch)==null?void 0:n.name},t)})]}),e.jsxs("div",{children:["Categories :",a.original.category.map((s,t)=>{var n;return e.jsx("span",{className:"badge badge-warning me-1",children:(n=s==null?void 0:s.category)==null?void 0:n.name},t)})]}),e.jsxs("div",{children:["subCategories :",a.original.subCategory.map((s,t)=>{var n;return e.jsx("span",{className:"badge badge-primary me-1",children:(n=s==null?void 0:s.subCategory)==null?void 0:n.name},t)})]}),e.jsxs("div",{children:["childSubCategories :",a.original.childSubCategory.map((s,t)=>{var n;return e.jsx("span",{className:"badge badge-primary me-1",children:(n=s==null?void 0:s.childSubCategory)==null?void 0:n.name},t)})]})]}):null,muiRowDragHandleProps:({table:a})=>({onDragEnd:async()=>{const{draggingRow:s,hoveredRow:t}=a.getState();Q==="table-2"?(E(null),await C.mutateAsync({id:s==null?void 0:s.original._id,update:{deleted:!0}}),q(n=>[...n,s.original]),O(n=>n.filter(g=>g!==s.original))):t&&s&&(await C.mutateAsync({id:s==null?void 0:s.original._id,update:{order:t==null?void 0:t.original.order}}),E(null))}}),renderTopToolbarCustomActions:({table:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card-header ribbon ribbon-start",children:e.jsx("div",{className:"ribbon-label ribbon ribbon-start bg-success",children:"Active"})}),e.jsxs(S,{sx:{display:"flex",gap:"1rem",p:"4px",justifyContent:"right"},children:[e.jsx(w,{color:"info",onClick:ga,variant:"contained",children:"Add Product"}),e.jsx(w,{color:"warning",onClick:async()=>{a.getSelectedRowModel().rows.map(async s=>{await C.mutateAsync({id:s.original._id,update:{available:!s.original.available}})}),a.toggleAllRowsSelected(!1)},variant:"contained",children:"Toggle Available"}),e.jsx(w,{color:"error",onClick:async()=>{let s=[];a.getSelectedRowModel().rows.map(t=>s.push(t.original._id)),await je.mutateAsync(s),a.toggleAllRowsSelected(!1)},variant:"contained",children:"Delete Selected"})]})]}),data:We,onEditingRowCancel:()=>h({}),onEditingRowSave:a=>he(a),getRowId:a=>`table-1-${a.name}`,muiTablePaperProps:{onDragEnter:()=>E("table-1"),sx:{outline:Q==="table-1"?"2px dashed green":void 0}},displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"}}},renderRowActions:({row:a,table:s})=>e.jsxs(S,{sx:{display:"flex",gap:"1rem"},children:[e.jsx(k,{title:"Edit",children:e.jsx(A,{onClick:()=>s.setEditingRow(a),children:e.jsx(Ae,{})})}),e.jsx(k,{title:"Delete",children:e.jsx(A,{color:"error",onClick:()=>{I(a.original._id),ve()},children:e.jsx(Te,{})})}),e.jsx(k,{title:"Edit product Forum",children:e.jsx(Ca,{to:`/apps/eCommerce/productForm/${a.original._id}`,children:e.jsx(A,{color:"info",onClick:()=>{console.log("row.original",a.original)},children:e.jsx(Ve,{})})})}),e.jsx(k,{title:"Arrange SubCategories",children:e.jsx(A,{color:"warning",onClick:()=>{I(a.original),xe()},children:e.jsx("i",{className:"fa-solid fa-layer-group text-warning"})})})]})}),ba=ke({...ye,data:Ge,enableRowSelection:!0,enableStickyHeader:!0,enableCellActions:!0,enableClickToCopy:"context-menu",enableEditing:!0,editDisplayMode:"row",createDisplayMode:"row",rowPinningDisplayMode:"select-sticky",positionToolbarAlertBanner:"bottom",positionActionsColumn:"last",enableRowOrdering:!0,enableSorting:!1,enableExpandAll:!1,state:{columnOrder:["mrt-row-select","mrt-row-drag","order","name","description","price","mrt-row-expand","branch","category","subCategory","childSubCategory","available","showWeight","book"]},muiDetailPanelProps:()=>({sx:a=>({backgroundColor:a.palette.mode==="dark"?"rgba(255,210,244,0.1)":"rgba(0,0,0,0.1)"})}),muiExpandButtonProps:({row:a,table:s})=>({onClick:()=>s.setExpanded({[a.id]:!a.getIsExpanded()}),sx:{transform:a.getIsExpanded()?"rotate(180deg)":"rotate(-90deg)",transition:"transform 0.2s"}}),renderDetailPanel:({row:a})=>a.original.branch?e.jsxs("div",{className:"d-flex justify-content-evenly",children:[e.jsxs("div",{children:["Branches :",a.original.branch.map((s,t)=>e.jsx("span",{className:"badge badge-secondary me-1",children:s.branch.name},t))]}),e.jsxs("div",{children:["Categories :",a.original.category.map((s,t)=>e.jsx("span",{className:"badge badge-warning me-1",children:s.category.name},t))]}),e.jsxs("div",{children:["subCategories :",a.original.subCategory.map((s,t)=>e.jsx("span",{className:"badge badge-primary me-1",children:s.subCategory.name},t))]})]}):null,muiRowDragHandleProps:({table:a})=>({onDragEnd:async()=>{const{draggingRow:s,hoveredRow:t}=a.getState();Q==="table-1"?(E(null),await C.mutateAsync({id:s==null?void 0:s.original._id,update:{deleted:!1}}),q(n=>[...n,s.original]),O(n=>n.filter(g=>g!==s.original))):t&&s&&(await C.mutateAsync({id:s==null?void 0:s.original._id,update:{order:t==null?void 0:t.original.order}}),E(null))}}),renderTopToolbarCustomActions:({table:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card-header ribbon ribbon-start",children:e.jsx("div",{className:"ribbon-label ribbon ribbon-start bg-danger",children:"Archived"})}),e.jsxs(S,{sx:{display:"flex",gap:"1rem",p:"4px",justifyContent:"right"},children:[e.jsx(w,{color:"warning",onClick:async()=>{a.getSelectedRowModel().rows.map(async s=>{await C.mutateAsync({id:s.original._id,update:{available:!s.original.available}})}),a.toggleAllRowsSelected(!1)},variant:"contained",children:"Toggle Available"}),e.jsx(w,{color:"error",onClick:async()=>{let s=[];a.getSelectedRowModel().rows.map(t=>s.push(t.original._id)),await je.mutateAsync(s),a.toggleAllRowsSelected(!1)},variant:"contained",children:"Delete Selected"})]})]}),defaultColumn:{size:100},onEditingRowCancel:()=>h({}),onEditingRowSave:a=>he(a),getRowId:a=>`table-2-${a.name}`,muiTablePaperProps:{onDragEnter:()=>E("table-2"),sx:{outline:Q==="table-2"?"2px dashed pink":void 0}},displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"}}},renderRowActions:({row:a,table:s})=>e.jsxs(S,{sx:{display:"flex",gap:"1rem"},children:[e.jsx(k,{title:"Edit",children:e.jsx(A,{onClick:()=>s.setEditingRow(a),children:e.jsx(Ae,{})})}),e.jsx(k,{title:"Delete",children:e.jsx(A,{color:"error",onClick:()=>{I(a.original._id),ve()},children:e.jsx(Te,{})})}),e.jsx(k,{title:"Arrange products",children:e.jsx(A,{color:"success",onClick:()=>{I(a.original),pa()},children:e.jsx("i",{className:"fa-brands fa-2xl text-primary fa-product-hunt"})})}),e.jsx(k,{title:"Arrange SubCategories",children:e.jsx(A,{color:"warning",onClick:()=>{I(a.original),xe()},children:e.jsx("i",{className:"fa-solid fa-layer-group text-warning"})})})]})});return e.jsxs(e.Fragment,{children:[e.jsx(S,{sx:{display:"grid",gap:"1rem",overflow:"auto",p:"4px"},children:e.jsx(Ee,{table:Ce})}),e.jsx(S,{sx:{display:"grid",gap:"1rem",overflow:"auto",p:"4px"},children:e.jsx(Ee,{table:ba})}),e.jsxs(v,{show:Je,onHide:fe,children:[e.jsx(v.Header,{closeButton:!0,children:e.jsx(v.Title,{children:"Confirm Deletion"})}),e.jsx(v.Body,{children:"Are you sure you want to delete this item?"}),e.jsx(v.Footer,{children:e.jsxs(S,{sx:{display:"flex",gap:"1rem",p:"4px"},children:[e.jsx(w,{color:"info",variant:"contained",onClick:fe,children:"Cancel"}),e.jsx(w,{color:"error",variant:"contained",onClick:ha,children:"Delete"})]})})]}),e.jsxs(v,{show:Ye,onHide:ge,children:[e.jsx(v.Header,{closeButton:!0,children:e.jsxs(v.Title,{children:["Arrange Procusts Order in ",y==null?void 0:y.name," Category"]})}),e.jsx(v.Body,{}),e.jsx(v.Footer,{children:e.jsx(S,{sx:{display:"flex",gap:"1rem",p:"4px"},children:e.jsx(w,{color:"info",variant:"contained",onClick:ge,children:"Close"})})})]}),e.jsxs(v,{show:Xe,onHide:be,children:[e.jsx(v.Header,{closeButton:!0,children:e.jsxs(v.Title,{children:["Arrange SubCategories Order in ",y==null?void 0:y.name," Category"]})}),e.jsx(v.Body,{}),e.jsx(v.Footer,{children:e.jsx(S,{sx:{display:"flex",gap:"1rem",p:"4px"},children:e.jsx(w,{color:"info",variant:"contained",onClick:be,children:"Close"})})})]})]})},Ms=()=>{const{itemIdForUpdate:u}=R();return e.jsxs(e.Fragment,{children:[e.jsx(xs,{children:e.jsx(Is,{})}),u!==void 0&&e.jsx(Es,{})]})},Qs=()=>e.jsx(ys,{children:e.jsx(Ss,{children:e.jsx(La,{children:e.jsx(Ua,{children:e.jsx(Pe,{children:e.jsx(Pe,{children:e.jsx(Za,{children:e.jsx(es,{children:e.jsx(rs,{children:e.jsx(is,{children:e.jsx(cs,{children:e.jsx(ds,{children:e.jsx(hs,{children:e.jsx(gs,{children:e.jsxs(Ps,{children:[e.jsx(Sa,{}),e.jsx(fs,{backend:js,children:e.jsx(wa,{children:e.jsx(Ms,{})})})]})})})})})})})})})})})})})})}),Ds=[{title:"Product Management",path:"/apps/eCommerce/products",isSeparator:!1,isActive:!1},{title:"Products list",path:"",isSeparator:!0,isActive:!1}],Xs=()=>e.jsxs(Pa,{children:[e.jsx(G,{element:e.jsx(ka,{}),children:e.jsx(G,{path:"products",element:e.jsxs(e.Fragment,{children:[e.jsx(Aa,{breadcrumbs:Ds,children:"Products list"}),e.jsx(Qs,{})]})})}),e.jsx(G,{index:!0,element:e.jsx(Ta,{to:"/apps/eCommerce/products"})})]});export{Xs as default};
