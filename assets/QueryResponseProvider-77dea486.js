import{r as a,j as Q,a0 as n}from"./index-3fc7229d.js";import{i as c,c as I,a as U,s as h,u as l,Q as y}from"./consts-623f6364.js";const C=a.createContext(c),P=({children:t})=>{const[e,s]=a.useState(c.state),d=r=>{const i={...e,...r};s(i)};return Q.jsx(C.Provider,{value:{state:e,updateState:d},children:t})},_=()=>a.useContext(C),f="https://sge-commerce.onrender.com/api/v1",u=`${f}/branch`,v=`${f}/branch?deleted=false`,m=`${f}/branch?deleted=true`;let o="";if(c.state&&typeof c.state=="object"){const t=Object.entries(c.state).map(([e,s])=>`${encodeURIComponent(e)}=${encodeURIComponent(s)}`).join("&");o=v+"&"+t}const b=t=>(o=v+"&"+t,n.get(`${t!=null?o:v}`).then(e=>e.data)),j=t=>(o=m+"&"+t,n.get(`${t!=null?o:m}`).then(e=>e.data)),F=t=>n.get(`${u}/${t}`).then(e=>e.data).then(e=>e.data),T=t=>n.post(u,t).then(e=>e.data).then(e=>e.data),D=(t,e)=>n.put(`${u}/${t}`,e).then(s=>s.data).then(s=>s.data),N=t=>n.delete(`${u}/${t}`).then(()=>{}),k=t=>{const e=t.map(s=>n.delete(`${u}/${s}`));return n.all(e).then(()=>{})},$=I(U),w=({children:t})=>{const{state:e}=_(),[s,d]=a.useState(h(e)),[r,i]=a.useState(h(e)),p=a.useMemo(()=>h(e),[e]),R=a.useMemo(()=>h(e),[e]);a.useEffect(()=>{s!==p&&(s.match(/search=([^&]*)/)&&d(s.replace(/search=/,"keyword=")),console.log("query",decodeURIComponent(s)),d(decodeURIComponent(p)))},[p]),a.useEffect(()=>{r!==R&&(r.match(/search=([^&]*)/)&&i(r.replace(/search=/,"keyword=")),console.log("archivedQuery",decodeURIComponent(r)),i(decodeURIComponent(R)))},[R]);const{isFetching:g,refetch:B,data:S}=l(`${y.BRNACHES_LIST}-${s}`,()=>b(s),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),{isFetching:A,refetch:E,data:x}=l(`${y.ARCHIVED_BRNACHES_LIST}-${r}`,()=>j(r),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1});return Q.jsx($.Provider,{value:{isLoading:g||A,refetch:()=>{B(),E()},response:{active:S,archived:x},query:s},children:t})},q=()=>a.useContext($),O=()=>{var e,s;const{response:t}=q();return t?{active:((e=t==null?void 0:t.active)==null?void 0:e.data)||[],archived:((s=t==null?void 0:t.archived)==null?void 0:s.data)||[]}:{active:[],archived:[]}};export{P as Q,j as a,w as b,q as c,D as d,T as e,F as f,b as g,N as h,k as i,O as u};
