import{r as a,j as R,a0 as s}from"./index-3fc7229d.js";import{i as c,c as _,a as x,s as g,u as S,Q as l}from"./consts-623f6364.js";const f=a.createContext(c),L=({children:e})=>{const[t,r]=a.useState(c.state),h=u=>{const o={...t,...u};r(o)};return R.jsx(f.Provider,{value:{state:t,updateState:h},children:e})},T=()=>a.useContext(f),n="https://sge-commerce.onrender.com/api/v1",i=`${n}/subCategory`,y=`${n}/subCategory?deleted=false`,b=`${n}/subCategory?deleted=true`;let d="";if(c.state&&typeof c.state=="object"){const e=Object.entries(c.state).map(([t,r])=>`${encodeURIComponent(t)}=${encodeURIComponent(r)}`).join("&");d=y+"&"+e}const O=e=>(d=y+"&"+e,s.get(`${e!=null?d:y}`).then(t=>t.data)),P=e=>(d=b+"&"+e,s.get(`${e!=null?d:b}`).then(t=>t.data)),q=e=>s.get(`${i}/${e}`).then(t=>t.data).then(t=>t.data),B=e=>s.post(i,e).then(t=>t.data).then(t=>t.data),F=(e,t)=>s.put(`${i}/${e}`,t).then(r=>r.data).then(r=>r.data),k=e=>s.delete(`${i}/${e}`).then(()=>{}),D=e=>{const t=e.map(r=>s.delete(`${i}/${r}`));return s.all(t).then(()=>{})},w=e=>s.get(`${n}/product/subCategory/${e}?fields=name,subCategory`).then(t=>t.data),H=(e,t,r)=>s.put(`${n}/product/subCategory/${t}`,{order:r,SubCategory:e}),M=e=>s.get(`${n}/childSubCategory/subCategory/${e}?fields=name,subCategory`).then(t=>t.data),V=(e,t,r)=>s.put(`${n}/childSubCategory/subCategory/${t}`,{order:r,subCategory:e}),v=_(x),W=({children:e})=>{const{state:t}=T(),[r,h]=a.useState(g(t)),u=a.useMemo(()=>g(t),[t]),[o,p]=a.useState(g(t)),C=a.useMemo(()=>g(t),[t]);a.useEffect(()=>{r!==u&&(r.match(/search=([^&]*)/)&&h(r.replace(/search=/,"keyword=")),h(decodeURIComponent(u)))},[u]),a.useEffect(()=>{o!==C&&(o.match(/search=([^&]*)/)&&p(o.replace(/search=/,"keyword=")),console.log("archivedQuery",decodeURIComponent(o)),p(decodeURIComponent(C)))},[C]);const{isFetching:m,refetch:Q,data:I}=S(`${l.SUB_CATEGORIES_LIST}-${r}`,()=>O(r),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),{isFetching:E,refetch:A,data:U}=S(`${l.ARCHIVED_SUB_CATEGORIES_LIST}-${o}`,()=>P(o),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1});return R.jsx(v.Provider,{value:{isLoading:m||E,refetch:()=>{Q(),A()},response:{active:I,archived:U},query:r},children:e})},$=()=>a.useContext(v),Y=()=>{var t,r;const{response:e}=$();return e?{active:((t=e==null?void 0:e.active)==null?void 0:t.data)||[],archived:((r=e==null?void 0:e.archived)==null?void 0:r.data)||[]}:{active:[],archived:[]}},z=()=>{const{refetch:e}=$();return e};export{L as Q,P as a,W as b,$ as c,F as d,B as e,q as f,O as g,H as h,w as i,V as j,M as k,z as l,k as m,D as n,Y as u};
