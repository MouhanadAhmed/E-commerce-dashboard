import{r as a,j as m,a0 as r}from"./index-3fc7229d.js";import{i as c,c as P,a as I,s as d,u as R,Q as l}from"./consts-623f6364.js";const Q=a.createContext(c),D=({children:t})=>{const[e,s]=a.useState(c.state),i=o=>{const n={...e,...o};s(n)};return m.jsx(Q.Provider,{value:{state:e,updateState:i},children:t})},U=()=>a.useContext(Q),v="https://sge-commerce.onrender.com/api/v1",u=`${v}/type`,y=`${v}/type?deleted=false`,_=`${v}/type?deleted=true`;let h="";if(c.state&&typeof c.state=="object"){const t=Object.entries(c.state).map(([e,s])=>`${encodeURIComponent(e)}=${encodeURIComponent(s)}`).join("&");h=y+"&"+t}const A=t=>(h=y+"&"+t,r.get(`${t!=null?h:y}`).then(e=>e.data)),j=t=>r.get(`${t!=null?h:_}`).then(e=>e.data),Y=t=>r.get(`${u}/${t}`).then(e=>e.data).then(e=>e.data),b=t=>r.post(u,t).then(e=>e.data).then(e=>e.data),k=(t,e)=>r.put(`${u}/${t}`,e).then(s=>s.data).then(s=>s.data),w=t=>r.delete(`${u}/${t}`).then(()=>{}),O=t=>{const e=t.map(s=>r.delete(`${u}/${s}`));return r.all(e).then(()=>{})},$=P(I),G=({children:t})=>{const{state:e}=U(),[s,i]=a.useState(d(e)),o=a.useMemo(()=>d(e),[e]),[n,f]=a.useState(d(e)),p=a.useMemo(()=>d(e),[e]);a.useEffect(()=>{s!==o&&(s.match(/search=([^&]*)/)&&i(s.replace(/search=/,"keyword=")),i(decodeURIComponent(o)))},[o]),a.useEffect(()=>{n!==p&&(n.match(/search=([^&]*)/)&&f(n.replace(/search=/,"keyword=")),f(decodeURIComponent(p)))},[p]);const{isFetching:g,refetch:T,data:S}=R(`${l.TYPES_LIST}-${s}`,()=>A(s),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),{isFetching:C,refetch:E,data:x}=R(`${l.ARCHIVED_TYPES_LIST}-${n}`,()=>j(),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1});return m.jsx($.Provider,{value:{isLoading:g||C,refetch:()=>{T(),E()},response:{active:S,archived:x},query:s},children:t})},q=()=>a.useContext($),H=()=>{var e,s;const{response:t}=q();return t?{active:((e=t==null?void 0:t.active)==null?void 0:e.data)||[],archived:((s=t==null?void 0:t.archived)==null?void 0:s.data)||[]}:{active:[],archived:[]}};export{D as Q,j as a,G as b,q as c,k as d,b as e,Y as f,A as g,w as h,O as i,H as u};
