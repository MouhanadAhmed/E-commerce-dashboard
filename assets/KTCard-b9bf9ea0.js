import{ad as m,ab as p,ae as b,af as v,ag as R,ac as d,ah as O,a2 as M,ai as y,j as x,U as S}from"./index-3fc7229d.js";import{l as g}from"./consts-623f6364.js";var E=function(a){m(u,a);function u(r,e){var t;return t=a.call(this)||this,t.client=r,t.setOptions(e),t.bindMethods(),t.updateResult(),t}var s=u.prototype;return s.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},s.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},s.onUnsubscribe=function(){if(!this.listeners.length){var e;(e=this.currentMutation)==null||e.removeObserver(this)}},s.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)},s.getCurrentResult=function(){return this.currentResult},s.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},s.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,p({},this.options,{variables:typeof e<"u"?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},s.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:b(),t=p({},e,{isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=t},s.notify=function(e){var t=this;v.batch(function(){t.mutateOptions&&(e.onSuccess?(t.mutateOptions.onSuccess==null||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(t.mutateOptions.onError==null||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(o){o(t.currentResult)})})},u}(R);function w(a,u,s){var r=d.useRef(!1),e=d.useState(0),t=e[1],o=O(a,u,s),h=M(),n=d.useRef();n.current?n.current.setOptions(o):n.current=new E(h,o);var i=n.current.getCurrentResult();d.useEffect(function(){r.current=!0;var c=n.current.subscribe(v.batchCalls(function(){r.current&&t(function(l){return l+1})}));return function(){r.current=!1,c()}},[]);var f=d.useCallback(function(c,l){n.current.mutate(c,l).catch(y)},[]);if(i.error&&g(void 0,n.current.options.useErrorBoundary,[i.error]))throw i.error;return p({},i,{mutate:f,mutateAsync:i.mutate})}const $=a=>{const{className:u,shadow:s,flush:r,resetSidePaddings:e,border:t,dashed:o,stretch:h,rounded:n,utilityP:i,utilityPY:f,utilityPX:c,children:l}=a;return x.jsx("div",{className:S("card",u&&u,{"shadow-sm":s,"card-flush":r,"card-px-0":e,"card-bordered":t,"card-dashed":o},h&&`card-${h}`,i&&`p-${i}`,c&&`px-${c}`,f&&`py-${f}`,n&&`card-${n}`),children:l})};export{$ as K,w as u};
