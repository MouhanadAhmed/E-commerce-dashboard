import{r as s,j as f,a0 as a}from"./index-b5515533.js";import{i as c,c as A,a as x,s as C,u as p,Q as y}from"./consts-d215bccc.js";const v=s.createContext(c),j=({children:e})=>{const[t,r]=s.useState(c.state),h=n=>{const o={...t,...n};r(o)};return f.jsx(v.Provider,{value:{state:t,updateState:h},children:e})},L=()=>s.useContext(v),d="https://sge-commerce.onrender.com/api/v1",i=`${d}/childSubCategory`,S=`${d}/childSubCategory?deleted=false`,R=`${d}/childSubCategory?deleted=true`;let u="";if(c.state&&typeof c.state=="object"){const e=Object.entries(c.state).map(([t,r])=>`${encodeURIComponent(t)}=${encodeURIComponent(r)}`).join("&");u=S+"&"+e}const T=e=>(u=S+"&"+e,a.get(`${e!=null?u:S}`).then(t=>t.data)),D=e=>(u=R+"&"+e,a.get(`${e!=null?u:R}`).then(t=>t.data)),q=e=>a.get(`${i}/${e}`).then(t=>t.data).then(t=>t.data),G=e=>a.post(i,e).then(t=>t.data).then(t=>t.data),H=(e,t)=>a.put(`${i}/${e}`,t).then(r=>r.data).then(r=>r.data),B=e=>a.delete(`${i}/${e}`).then(()=>{}),F=e=>{const t=e.map(r=>a.delete(`${i}/${r}`));return a.all(t).then(()=>{})},k=e=>a.get(`${d}/product/childSubCategory/${e}?fields=name,childSubCategory`).then(t=>t.data),w=(e,t,r)=>a.put(`${d}/product/childSubCategory/${t}`,{order:r,ChildSubCategory:e}),I=A(x),M=({children:e})=>{const{state:t}=L(),[r,h]=s.useState(C(t)),n=s.useMemo(()=>C(t),[t]),[o,g]=s.useState(C(t)),l=s.useMemo(()=>C(t),[t]);s.useEffect(()=>{r!==n&&(r.match(/search=([^&]*)/)&&h(r.replace(/search=/,"keyword=")),console.log("query",decodeURIComponent(r)),h(decodeURIComponent(n)))},[n]),s.useEffect(()=>{o!==l&&(o.match(/search=([^&]*)/)&&g(o.replace(/search=/,"keyword=")),console.log("archivedQuery",decodeURIComponent(o)),g(decodeURIComponent(l)))},[l]);const{isFetching:m,refetch:$,data:Q}=p(`${y.CHILD_SUB_CATEGORIES_LIST}-${r}`,()=>T(r),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),{isFetching:_,refetch:E,data:U}=p(`${y.ARCHIVED_CHILD_SUB_CATEGORIES_LIST}-${o}`,()=>D(o),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1});return f.jsx(I.Provider,{value:{isLoading:m||_,refetch:()=>{$(),E()},response:{active:Q,archived:U},query:r},children:e})},b=()=>s.useContext(I),V=()=>{var t,r;const{response:e}=b();return e?{active:((t=e==null?void 0:e.active)==null?void 0:t.data)||[],archived:((r=e==null?void 0:e.archived)==null?void 0:r.data)||[]}:{active:[],archived:[]}},W=()=>{const{refetch:e}=b();return e};export{j as Q,D as a,M as b,b as c,H as d,G as e,q as f,T as g,w as h,k as i,W as j,B as k,F as l,V as u};
