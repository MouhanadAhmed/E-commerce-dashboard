import{r,j as l,a0 as a}from"./index-3fc7229d.js";import{i as o,c as U,a as _,s as h,u as E,Q as x}from"./consts-623f6364.js";const m=r.createContext(o),D=({children:e})=>{const[t,s]=r.useState(o.state),d=c=>{const n={...t,...c};s(n)};return l.jsx(m.Provider,{value:{state:t,updateState:d},children:e})},j=()=>r.useContext(m),f="https://sge-commerce.onrender.com/api/v1",i=`${f}/productExtra`,R=`${f}/productExtra?deleted=false`,y=`${f}/productExtra?deleted=true`;let u="";if(o.state&&typeof o.state=="object"){const e=Object.entries(o.state).map(([t,s])=>`${encodeURIComponent(t)}=${encodeURIComponent(s)}`).join("&");u=R+"&"+e}const L=e=>(u=R+"&"+e,a.get(`${e!==void 0?u:R}`).then(t=>t.data)),P=e=>(u=y+"&"+e,a.get(`${e!==void 0?u:y}`).then(t=>t.data)),X=e=>a.get(`${i}/${e}`).then(t=>t.data).then(t=>t.data),b=e=>a.post(i,e).then(t=>t.data).then(t=>t.data),k=(e,t)=>a.put(`${i}/${e}`,t).then(s=>s.data).then(s=>s.data),w=e=>a.delete(`${i}/${e}`).then(()=>{}),O=e=>{const t=e.map(s=>a.delete(`${i}/${s}`));return a.all(t).then(()=>{})},Q=U(_),G=({children:e})=>{const{state:t}=j(),[s,d]=r.useState(h(t)),c=r.useMemo(()=>h(t),[t]),[n,v]=r.useState(h(t)),p=r.useMemo(()=>h(t),[t]);r.useEffect(()=>{s!==c&&(s.match(/search=([^&]*)/)&&d(s.replace(/search=/,"keyword=")),d(decodeURIComponent(c)))},[c]),r.useEffect(()=>{n!==p&&(n.match(/search=([^&]*)/)&&v(n.replace(/search=/,"keyword=")),v(decodeURIComponent(p)))},[p]);const{isFetching:g,refetch:S,data:C}=E(`${x.EXTRAS_LIST}-${s}`,()=>L(s),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),{isFetching:A,refetch:I,data:T}=E(`${x.ARCHIVED_EXTRAS_LIST}-${n}`,()=>P(n),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1});return l.jsx(Q.Provider,{value:{isLoading:g||A,refetch:()=>{S(),I()},response:{active:C,archived:T},query:s},children:e})},$=()=>r.useContext(Q),H=()=>{var t,s;const{response:e}=$();return e?{active:((t=e==null?void 0:e.active)==null?void 0:t.data)||[],archived:((s=e==null?void 0:e.archived)==null?void 0:s.data)||[]}:{active:[],archived:[]}},M=()=>{const{refetch:e}=$();return e};export{D as Q,P as a,G as b,$ as c,k as d,b as e,X as f,L as g,M as h,w as i,O as j,H as u};
